package uk.co.awe.pmat.gui.analysis;

import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JPanel;
import uk.co.awe.pmat.db.Rank;
import uk.co.awe.pmat.db.axis.Axis;
import uk.co.awe.pmat.db.axis.AxisValueType;
import uk.co.awe.pmat.gui.models.analysis.AxisModel;

/**
 * A GUI panel to allow the selection of the axis pairs of the plot. Each plot
 * can have multiple axis pairs, and each one will correspond to a different
 * AxisPanel.
 * 
 * @author AWE Plc copyright 2013
 */
public final class AxisPanel extends JPanel {

	private static final Icon CROSS_ICON = new ImageIcon(ClassLoader
			.getSystemResource("cross16.png"));
	private static final Icon PLUS_ICON = new ImageIcon(ClassLoader
			.getSystemResource("plus16.png"));

	/**
	 * Creates a new AxisPanel.
	 * 
	 * @param axisModel
	 *            the model behind this panel.
	 * @param panelNumber
	 *            the number to display on this panel, i.e. where it appears in
	 *            the list of axis panels.
	 * @param isCurrent
	 *            {@code true} if this panel is current, {@code false}
	 *            otherwise.
	 */
	public AxisPanel(final AxisModel axisModel, int panelNumber,
			boolean isCurrent) {
		initComponents();

		this.axisNumber.setText("" + panelNumber + ".");
		this.xAxisSelection.setModel(axisModel.getXAxisModel());
		this.yAxisSelection.setModel(axisModel.getyAxisModel());
		this.yAxisTypeSelection.setModel(axisModel.getYAxisTypeModel());
		this.rankSelection.setModel(axisModel.getRankModel());

		seriesButton.setAction(new AbstractAction("Series") {
			@Override
			public void actionPerformed(ActionEvent e) {
				axisModel.showSeriesDialog(axisNumber.getText());
			}
		});

		if (isCurrent) {
			addRemoveButton.setAction(new AbstractAction(null, PLUS_ICON) {
				@Override
				public void actionPerformed(ActionEvent e) {
					axisModel.addPanel();
				}
			});
		} else {
			addRemoveButton.setAction(new AbstractAction(null, CROSS_ICON) {
				@Override
				public void actionPerformed(ActionEvent e) {
					axisModel.removePanel();
				}
			});
		}
	}

	/**
	 * This method is called from within the constructor to initialise the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */
	@SuppressWarnings("unchecked")
	// <editor-fold defaultstate="collapsed"
	// desc="Generated Code">//GEN-BEGIN:initComponents
	private void initComponents() {
		java.awt.GridBagConstraints gridBagConstraints;

		setLayout(new java.awt.GridBagLayout());

		axisNumber.setText("1.");
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 0;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 0);
		add(axisNumber, gridBagConstraints);

		xAxisLabel.setLabelFor(xAxisSelection);
		xAxisLabel.setText("X Axis");
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 1;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 0);
		add(xAxisLabel, gridBagConstraints);
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 2;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.weightx = 1.0;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);
		add(xAxisSelection, gridBagConstraints);

		yAxisLabel.setLabelFor(yAxisSelection);
		yAxisLabel.setText("Y Axis");
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 3;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 0);
		add(yAxisLabel, gridBagConstraints);
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 4;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.weightx = 1.0;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 0);
		add(yAxisSelection, gridBagConstraints);

		seriesButton.setText("Series");
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 7;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 0);
		add(seriesButton, gridBagConstraints);

		addRemoveButton.setMaximumSize(new java.awt.Dimension(25, 25));
		addRemoveButton.setMinimumSize(new java.awt.Dimension(25, 25));
		addRemoveButton.setPreferredSize(new java.awt.Dimension(25, 25));
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 8;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);
		add(addRemoveButton, gridBagConstraints);
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 5;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.weightx = 0.5;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 0);
		add(yAxisTypeSelection, gridBagConstraints);
		gridBagConstraints = new java.awt.GridBagConstraints();
		gridBagConstraints.gridx = 6;
		gridBagConstraints.gridy = 0;
		gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
		gridBagConstraints.weightx = 0.3;
		gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 0);
		add(rankSelection, gridBagConstraints);
	}// </editor-fold>//GEN-END:initComponents

	// Variables declaration - do not modify//GEN-BEGIN:variables
	private final javax.swing.JButton addRemoveButton = new javax.swing.JButton();
	private final javax.swing.JLabel axisNumber = new javax.swing.JLabel();
	private final javax.swing.JComboBox<Rank> rankSelection = new javax.swing.JComboBox<Rank>();
	private final javax.swing.JButton seriesButton = new javax.swing.JButton();
	private final javax.swing.JLabel xAxisLabel = new javax.swing.JLabel();
	private final javax.swing.JComboBox<Axis> xAxisSelection = new javax.swing.JComboBox<Axis>();
	private final javax.swing.JLabel yAxisLabel = new javax.swing.JLabel();
	private final javax.swing.JComboBox<Axis> yAxisSelection = new javax.swing.JComboBox<Axis>();
	private final javax.swing.JComboBox<AxisValueType> yAxisTypeSelection = new javax.swing.JComboBox<AxisValueType>();
	// End of variables declaration//GEN-END:variables

}
